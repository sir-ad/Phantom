<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PUBLISHING - Phantom Documentation</title>
    <link rel="stylesheet" href="assets/oat.min.css">
    <script src="assets/oat.min.js"></script>
    <style>
        /* Custom tweaks for docs */
        body { display: flex; }
        .sidebar { width: 250px; border-right: 1px solid var(--border); padding: 1rem; height: 100vh; overflow-y: auto; position: fixed; }
        .main-content { margin-left: 250px; padding: 2rem; max-width: 800px; }
        div.code-block { background: var(--bg-alt); padding: 1rem; border-radius: 4px; overflow-x: auto; margin-bottom: 1rem; }
        /* Oat specific overrides if needed */
        [data-theme='dark'] { --bg: #111; --text: #eee; }
    </style>
</head>
<body data-theme="dark">
    <nav class="sidebar">
        <h3>Phantom</h3>
        <ul class="sidebar-list"><li><a href="/DISCORD_SETUP.html" class="">DISCORD_SETUP</a></li><li><a href="/PRODUCT_HUNT_LAUNCH.html" class="">PRODUCT_HUNT_LAUNCH</a></li><li><a href="/PUBLISHING.html" class="">PUBLISHING</a></li><li><a href="/README.html" class="">README</a></li><li><a href="/VISUAL_ASSETS_GUIDE.html" class="">VISUAL_ASSETS_GUIDE</a></li><li><a href="/architecture.html" class="">Architecture</a></li><li><a href="/cli-reference.html" class="">Cli Reference</a></li><li><a href="/cli.html" class="">Cli</a></li><li><a href="/configuration.html" class="">Configuration</a></li><li><a href="/contributing.html" class="">Contributing</a></li><li><a href="/features.html" class="">Features</a></li><li><a href="/getting-started.html" class="">Getting Started</a></li><li><a href="/install.html" class="">Install</a></li><li><a href="/installation.html" class="">Installation</a></li><li><a href="/intro.html" class="">Intro</a></li><li><a href="/mcp.html" class="">Mcp</a></li><li><a href="/modules.html" class="">Modules</a></li><li class="sidebar-header">Features</li><li><a href="/features/agents.html" class="">Agents</a></li><li><a href="/features/chat.html" class="">Chat</a></li><li><a href="/features/prd.html" class="">Prd</a></li><li><a href="/features/simulation.html" class="">Simulation</a></li><li><a href="/features/swarm.html" class="">Swarm</a></li><li class="sidebar-header">Pm</li><li><a href="/pm/launch-plan.html" class="">Launch Plan</a></li><li><a href="/pm/metrics-kpi-framework.html" class="">Metrics Kpi Framework</a></li><li><a href="/pm/personas-jtbd.html" class="">Personas Jtbd</a></li><li><a href="/pm/prd-phantom-v1.html" class="">Prd Phantom V1</a></li><li><a href="/pm/product-hunt-runbook.html" class="">Product Hunt Runbook</a></li><li><a href="/pm/roadmap-quarterly.html" class="">Roadmap Quarterly</a></li><li class="sidebar-header">Providers</li><li><a href="/providers/anthropic.html" class="">Anthropic</a></li><li><a href="/providers/gemini.html" class="">Gemini</a></li><li><a href="/providers/index.html" class="">Index</a></li><li><a href="/providers/ollama.html" class="">Ollama</a></li><li><a href="/providers/openai.html" class="">Openai</a></li><li class="sidebar-header">Status</li><li><a href="/status/capability-matrix.html" class="">Capability Matrix</a></li><li><a href="/status/demo-vs-real.html" class="">Demo Vs Real</a></li><li><a href="/status/roadmap-status.html" class="">Roadmap Status</a></li><li class="sidebar-header">Tech</li><li><a href="/tech/architecture-overview.html" class="">Architecture Overview</a></li><li class="sidebar-header">Tech/Core</li><li><a href="/tech/core/agent-swarm-spec.html" class="">Agent Swarm Spec</a></li><li><a href="/tech/core/context-engine-spec.html" class="">Context Engine Spec</a></li><li class="sidebar-header">Tech/Installer</li><li><a href="/tech/installer/install-script-design.html" class="">Install Script Design</a></li><li><a href="/tech/installer/one-line-installer-spec.html" class="">One Line Installer Spec</a></li><li><a href="/tech/installer/release-manifest-schema.html" class="">Release Manifest Schema</a></li><li class="sidebar-header">Tech/Integrations</li><li><a href="/tech/integrations/adapter-specs.html" class="">Adapter Specs</a></li><li><a href="/tech/integrations/mcp-core-spec.html" class="">Mcp Core Spec</a></li><li class="sidebar-header">Tech/Security</li><li><a href="/tech/security/privacy-model.html" class="">Privacy Model</a></li><li class="sidebar-header">Tech/Testing</li><li><a href="/tech/testing/test-strategy.html" class="">Test Strategy</a></li><li class="sidebar-header">User</li><li><a href="/user/install.html" class="">Install</a></li><li><a href="/user/integrations.html" class="">Integrations</a></li><li><a href="/user/modules.html" class="">Modules</a></li><li><a href="/user/quickstart.html" class="">Quickstart</a></li><li><a href="/user/troubleshooting.html" class="">Troubleshooting</a></li><li class="sidebar-header">Vision</li><li><a href="/vision/2-year-vision.html" class="">2 Year Vision</a></li><li><a href="/vision/agent-personas.html" class="">Agent Personas</a></li><li><a href="/vision/magic-moments.html" class="">Magic Moments</a></li><li><a href="/vision/phantom-magical-os.html" class="">Phantom Magical Os</a></li><li class="sidebar-header">Web</li><li><a href="/web/design-system.html" class="">Design System</a></li><li><a href="/web/launch-runbook.html" class="">Launch Runbook</a></li><li><a href="/web/page-spec-docs.html" class="">Page Spec Docs</a></li><li><a href="/web/page-spec-home.html" class="">Page Spec Home</a></li><li><a href="/web/page-spec-install.html" class="">Page Spec Install</a></li><li><a href="/web/page-spec-modules.html" class="">Page Spec Modules</a></li><li><a href="/web/seo-analytics.html" class="">Seo Analytics</a></li><li><a href="/web/website-prd.html" class="">Website Prd</a></li></ul>
    </nav>
    <main class="main-content">
        <h1>PUBLISHING</h1>
        <h1>PHANTOM npm Publishing Guide</h1>
<p>Complete guide for publishing PHANTOM packages to npm.</p>
<h2>Prerequisites</h2>
<ol>
<li><strong>npm Account</strong>: Create an account at npmjs.com</li>
<li><strong>Organization</strong>: PhantomPM organization must be created on npm</li>
<li><strong>Authentication</strong>: Logged in via <code>npm login</code></li>
<li><strong>GitHub Repository</strong>: PhantomPM/phantom must be public</li>
</ol>
<h2>Package Structure</h2>
<p>PHANTOM uses a monorepo structure with these publishable packages:</p>
<ul>
<li><code>@phantompm/cli</code> - Main CLI package</li>
<li><code>@phantompm/core</code> - Core functionality</li>
<li><code>@phantompm/modules</code> - Built-in modules</li>
<li><code>@phantompm/mcp-server</code> - MCP server implementation</li>
<li><code>@phantompm/tui</code> - Terminal UI components</li>
</ul>
<h2>Publishing Workflow</h2>
<h3>1. Pre-Publish Checklist</h3>
<p>Before publishing, ensure:</p>
<ul>
<li><input disabled="" type="checkbox"> All tests pass (<code>npm test</code>)</li>
<li><input disabled="" type="checkbox"> Build succeeds (<code>npm run build</code>)</li>
<li><input disabled="" type="checkbox"> Version number updated (following semver)</li>
<li><input disabled="" type="checkbox"> CHANGELOG.md updated</li>
<li><input disabled="" type="checkbox"> README.md complete</li>
<li><input disabled="" type="checkbox"> No <code>private: true</code> in package.json</li>
<li><input disabled="" type="checkbox"> <code>files</code> array includes only necessary files</li>
<li><input disabled="" type="checkbox"> <code>.npmignore</code> configured (if needed)</li>
</ul>
<h3>2. Version Bump</h3>
<p>Use semantic versioning:</p>
<pre><code class="language-bash"># Patch - bug fixes
npm version patch

# Minor - new features
npm version minor

# Major - breaking changes
npm version major
</code></pre>
<p>Or manually update version in package.json.</p>
<h3>3. Build All Packages</h3>
<pre><code class="language-bash"># Build all workspaces
npm run build

# Or build specific package
cd packages/cli &amp;&amp; npm run build
</code></pre>
<h3>4. Test Installation</h3>
<p>Before publishing, test the package locally:</p>
<pre><code class="language-bash"># Create test directory
mkdir /tmp/phantom-test &amp;&amp; cd /tmp/phantom-test

# Link local package
npm link /path/to/phantom/packages/cli

# Test functionality
phantom --version
phantom --help
</code></pre>
<h3>5. Publish to npm</h3>
<h4>Option A: Publish from packages directory</h4>
<pre><code class="language-bash">cd packages/cli
npm publish --access public
</code></pre>
<h4>Option B: Automated via GitHub Actions</h4>
<p>Publishing is automatically triggered on git tag push:</p>
<pre><code class="language-bash"># Create version tag
git tag -a v1.0.0 -m &quot;Release version 1.0.0&quot;

# Push tag
git push origin v1.0.0
</code></pre>
<p>The GitHub Actions workflow (<code>.github/workflows/release.yml</code>) will:</p>
<ol>
<li>Build all packages</li>
<li>Run tests</li>
<li>Publish to npm</li>
<li>Create GitHub release</li>
<li>Upload artifacts</li>
</ol>
<h3>6. Verify Publication</h3>
<p>After publishing, verify:</p>
<pre><code class="language-bash"># Check package on npm
npm view @phantompm/cli

# Test installation
npm install -g @phantompm/cli

# Verify it works
phantom --version
</code></pre>
<p>Visit: <a href="https://www.npmjs.com/package/@phantompm/cli">https://www.npmjs.com/package/@phantompm/cli</a></p>
<h2>GitHub Actions Automated Publishing</h2>
<h3>Setup Required Secrets</h3>
<p>In GitHub repository settings, add these secrets:</p>
<ol>
<li><p><strong><code>NPM_TOKEN</code></strong> - npm access token</p>
<ul>
<li>Generate at: <a href="https://www.npmjs.com/settings/tokens">https://www.npmjs.com/settings/tokens</a></li>
<li>Select &quot;Automation&quot; token type</li>
<li>Add to GitHub Secrets</li>
</ul>
</li>
<li><p><strong><code>HOMEBREW_TAP_TOKEN</code></strong> - For Homebrew formula updates (optional)</p>
</li>
</ol>
<h3>How It Works</h3>
<p>The release workflow triggers on tag push:</p>
<pre><code class="language-yaml">on:
  push:
    tags:
      - &quot;v*&quot;
</code></pre>
<p>Workflow steps:</p>
<ol>
<li>Checkout code</li>
<li>Setup Node.js</li>
<li>Install dependencies</li>
<li>Build packages</li>
<li>Run tests</li>
<li>Publish to npm</li>
<li>Create GitHub release</li>
<li>Upload binaries</li>
</ol>
<h3>Manual Trigger</h3>
<p>You can also trigger manually:</p>
<ol>
<li>Go to GitHub Actions tab</li>
<li>Select &quot;Release&quot; workflow</li>
<li>Click &quot;Run workflow&quot;</li>
<li>Select branch and run</li>
</ol>
<h2>Package Configuration Details</h2>
<h3>package.json Requirements</h3>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;@phantompm/cli&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;Package description&quot;,
  &quot;main&quot;: &quot;dist/index.js&quot;,
  &quot;bin&quot;: {
    &quot;phantom&quot;: &quot;dist/index.js&quot;
  },
  &quot;files&quot;: [
    &quot;dist/**/*&quot;,
    &quot;README.md&quot;,
    &quot;LICENSE&quot;
  ],
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;tsc&quot;,
    &quot;prepublishOnly&quot;: &quot;npm run build&quot;
  },
  &quot;publishConfig&quot;: {
    &quot;access&quot;: &quot;public&quot;
  },
  &quot;keywords&quot;: [&quot;cli&quot;, &quot;ai&quot;, &quot;product-management&quot;],
  &quot;author&quot;: &quot;PhantomPM &lt;hello@phantom.pm&gt;&quot;,
  &quot;license&quot;: &quot;MIT&quot;,
  &quot;repository&quot;: {
    &quot;type&quot;: &quot;git&quot;,
    &quot;url&quot;: &quot;https://github.com/PhantomPM/phantom.git&quot;
  },
  &quot;engines&quot;: {
    &quot;node&quot;: &quot;&gt;=18.0.0&quot;
  }
}
</code></pre>
<h3>Key Fields Explained</h3>
<ul>
<li><strong><code>name</code></strong>: Must be <code>@phantompm/[package-name]</code> for scoped packages</li>
<li><strong><code>files</code></strong>: Only these files are included in the published package</li>
<li><strong><code>bin</code></strong>: Command-line executable entry point</li>
<li><strong><code>publishConfig.access</code></strong>: Required for scoped packages to be public</li>
<li><strong><code>engines</code></strong>: Specifies Node.js version requirements</li>
</ul>
<h2>Publishing Strategy</h2>
<h3>Initial Release (v1.0.0)</h3>
<ol>
<li>Ensure all features documented</li>
<li>Create comprehensive README</li>
<li>Test on multiple platforms</li>
<li>Publish all packages simultaneously</li>
<li>Announce on social media</li>
</ol>
<h3>Subsequent Releases</h3>
<p><strong>Patch Releases (1.0.x)</strong>:</p>
<ul>
<li>Bug fixes only</li>
<li>Can be released quickly</li>
<li>Minimal testing required</li>
</ul>
<p><strong>Minor Releases (1.x.0)</strong>:</p>
<ul>
<li>New features</li>
<li>Backward compatible</li>
<li>Require changelog update</li>
<li>Moderate testing</li>
</ul>
<p><strong>Major Releases (x.0.0)</strong>:</p>
<ul>
<li>Breaking changes</li>
<li>Comprehensive testing</li>
<li>Migration guide required</li>
<li>Deprecation notices</li>
</ul>
<h3>Release Schedule</h3>
<ul>
<li><strong>Patch</strong>: As needed (bugs, security fixes)</li>
<li><strong>Minor</strong>: Every 2-4 weeks (features)</li>
<li><strong>Major</strong>: Every 6-12 months (breaking changes)</li>
</ul>
<h2>Troubleshooting</h2>
<h3>Common Issues</h3>
<p><strong>1. E403 Forbidden</strong></p>
<pre><code>npm ERR! 403 Forbidden - PUT https://registry.npmjs.org/@phantompm%2fcli
</code></pre>
<p>Solution: Ensure you&#39;re logged in and have publish permissions</p>
<p><strong>2. E404 Not Found</strong></p>
<pre><code>npm ERR! 404 Not Found - PUT https://registry.npmjs.org/@phantompm
</code></pre>
<p>Solution: Organization doesn&#39;t exist, create it first</p>
<p><strong>3. Version Already Exists</strong></p>
<pre><code>npm ERR! You cannot publish over the previously published versions
</code></pre>
<p>Solution: Bump version number in package.json</p>
<p><strong>4. Private Package Error</strong></p>
<pre><code>npm ERR! This package has been marked as private
</code></pre>
<p>Solution: Remove <code>&quot;private&quot;: true</code> from package.json</p>
<p><strong>5. Build Files Missing</strong></p>
<pre><code>npm ERR! main entry point missing
</code></pre>
<p>Solution: Run <code>npm run build</code> before publishing or add to <code>prepublishOnly</code> script</p>
<h3>npm Organization Setup</h3>
<ol>
<li><p>Create organization:</p>
<pre><code class="language-bash">npm org create phantompm
</code></pre>
</li>
<li><p>Invite team members:</p>
<pre><code class="language-bash">npm org add phantompm username
</code></pre>
</li>
<li><p>Set team permissions:</p>
<ul>
<li>Owners: Full access</li>
<li>Developers: Publish access</li>
<li>Read-only: Install only</li>
</ul>
</li>
</ol>
<h3>npm Token Management</h3>
<p><strong>Create Token:</strong></p>
<ol>
<li>Go to <a href="https://www.npmjs.com/settings/tokens">https://www.npmjs.com/settings/tokens</a></li>
<li>Click &quot;Create New Token&quot;</li>
<li>Select &quot;Automation&quot; type</li>
<li>Copy token</li>
</ol>
<p><strong>Add to GitHub:</strong></p>
<ol>
<li>Go to repository Settings â†’ Secrets</li>
<li>Click &quot;New repository secret&quot;</li>
<li>Name: <code>NPM_TOKEN</code></li>
<li>Value: [paste token]</li>
</ol>
<p><strong>Rotate Token:</strong></p>
<ol>
<li>Generate new token</li>
<li>Update GitHub secret</li>
<li>Delete old token</li>
<li>Revoke if compromised</li>
</ol>
<h2>Distribution Channels</h2>
<h3>npm Registry (Primary)</h3>
<pre><code class="language-bash">npm install -g @phantompm/cli
</code></pre>
<h3>GitHub Packages (Mirror)</h3>
<pre><code class="language-bash">npm install -g @phantompm/cli --registry=https://npm.pkg.github.com
</code></pre>
<h3>Direct Download</h3>
<pre><code class="language-bash">curl -fsSL https://phantom.pm/install | sh
</code></pre>
<h3>Homebrew (macOS)</h3>
<pre><code class="language-bash">brew tap phantompm/tap
brew install phantom
</code></pre>
<h2>Post-Publish Checklist</h2>
<p>After publishing:</p>
<ul>
<li><input disabled="" type="checkbox"> Verify package on npmjs.com</li>
<li><input disabled="" type="checkbox"> Test global installation</li>
<li><input disabled="" type="checkbox"> Update website installation instructions</li>
<li><input disabled="" type="checkbox"> Create GitHub release notes</li>
<li><input disabled="" type="checkbox"> Announce on Twitter/Discord</li>
<li><input disabled="" type="checkbox"> Update documentation links</li>
<li><input disabled="" type="checkbox"> Monitor for issues</li>
<li><input disabled="" type="checkbox"> Update CHANGELOG.md</li>
</ul>
<h2>Rollback Procedure</h2>
<p>If a bad version is published:</p>
<pre><code class="language-bash"># Deprecate version
npm deprecate @phantompm/cli@1.0.1 &quot;Critical bug, use 1.0.2 instead&quot;

# Or unpublish (within 24 hours)
npm unpublish @phantompm/cli@1.0.1
</code></pre>
<p><strong>Note</strong>: Unpublishing is discouraged after 24 hours or if package has dependents.</p>
<h2>Best Practices</h2>
<ol>
<li><strong>Always test before publishing</strong> - Use <code>npm link</code> locally</li>
<li><strong>Use semantic versioning</strong> - Follow semver strictly</li>
<li><strong>Write good commit messages</strong> - For automatic changelog generation</li>
<li><strong>Tag releases in git</strong> - Match npm version exactly</li>
<li><strong>Include only necessary files</strong> - Use <code>files</code> array in package.json</li>
<li><strong>Document breaking changes</strong> - In README and CHANGELOG</li>
<li><strong>Monitor bundle size</strong> - Keep packages lean</li>
<li><strong>Automate where possible</strong> - Use GitHub Actions</li>
</ol>
<h2>Resources</h2>
<ul>
<li>npm Documentation: <a href="https://docs.npmjs.com/">https://docs.npmjs.com/</a></li>
<li>Semantic Versioning: <a href="https://semver.org/">https://semver.org/</a></li>
<li>GitHub Actions: <a href="https://docs.github.com/en/actions">https://docs.github.com/en/actions</a></li>
<li>npm Scoped Packages: <a href="https://docs.npmjs.com/using-npm/scope.html">https://docs.npmjs.com/using-npm/scope.html</a></li>
</ul>
<hr>
<p><strong>Quick Reference Commands:</strong></p>
<pre><code class="language-bash"># Login to npm
npm login

# Check logged in user
npm whoami

# View package info
npm view @phantompm/cli

# Publish
npm publish --access public

# Test installation
npm install -g @phantompm/cli

# List global packages
npm list -g

# Uninstall
npm uninstall -g @phantompm/cli
</code></pre>

    </main>
</body>
</html>