<!doctype html><html data-theme=dark lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>Context Engine Spec – Phantom</title><meta content="The invisible force behind every great product" name=description><link href=https://sir-ad.github.io/Phantom/oat.min.css rel=stylesheet><link href=https://sir-ad.github.io/Phantom/docs.css rel=stylesheet><body><nav class=sidebar><a class=logo href=https://sir-ad.github.io/Phantom> <strong>▲ Phantom</strong> </a><ul><li><a href=https://sir-ad.github.io/Phantom>← Home</a><li><a href=https://sir-ad.github.io/Phantom/docs/install>Install</a><li><a href=https://sir-ad.github.io/Phantom/docs/modules>Modules</a></li><hr><li class=section-header>Technical Specs<li><a href=https://sir-ad.github.io/Phantom/docs/tech/architecture-overview/>Architecture Overview</a><li class=section-header>User Guide<li><a href=https://sir-ad.github.io/Phantom/docs/user/install/>Install</a><li><a href=https://sir-ad.github.io/Phantom/docs/user/integrations/>Integrations</a><li><a href=https://sir-ad.github.io/Phantom/docs/user/modules/>Modules</a><li><a href=https://sir-ad.github.io/Phantom/docs/user/quickstart/>Quickstart</a><li><a href=https://sir-ad.github.io/Phantom/docs/user/troubleshooting/>Troubleshooting</a><li class=section-header>Features<li><a href=https://sir-ad.github.io/Phantom/docs/features/agents/>Agents</a><li><a href=https://sir-ad.github.io/Phantom/docs/features/chat/>Chat</a><li><a href=https://sir-ad.github.io/Phantom/docs/features/analyze/>Deep Task Analysis</a><li><a href=https://sir-ad.github.io/Phantom/docs/features/oracle/>Phantom Oracle</a><li><a href=https://sir-ad.github.io/Phantom/docs/features/prd/>Prd</a><li><a href=https://sir-ad.github.io/Phantom/docs/features/simulation/>Simulation</a><li><a href=https://sir-ad.github.io/Phantom/docs/features/swarm/>Swarm</a><li class=section-header>Providers<li><a href=https://sir-ad.github.io/Phantom/docs/providers/anthropic/>Anthropic</a><li><a href=https://sir-ad.github.io/Phantom/docs/providers/gemini/>Gemini</a><li><a href=https://sir-ad.github.io/Phantom/docs/providers/overview/>Index</a><li><a href=https://sir-ad.github.io/Phantom/docs/providers/ollama/>Ollama</a><li><a href=https://sir-ad.github.io/Phantom/docs/providers/openai/>Openai</a></ul></nav><main class=content><article><h1>Context Engine Spec</h1><p>Owner: PhantomPM Core Team<br> Last Updated: 2026-02-13<br> Status: Real<h2 id=current-implementation-state>Current Implementation State</h2><p>Implemented:<ol><li>recursive file indexing<li>extension-based type classification<li>language detection for known extensions<li>simple query search over path/content<li>aggregate context statistics and health score</ol><p>Reference: <code>packages/core/src/context.ts</code><h2 id=current-limitations>Current Limitations</h2><ol><li>in-memory map storage only<li>no persistent embedding index<li>limited semantic relevance ranking<li>large-file content skip threshold is fixed</ol><h2 id=target-state>Target State</h2><ol><li>persistent index store with incremental updates<li>semantic retrieval path for richer context grounding<li>configurable file limits and ignore policies<li>richer metadata extraction for artifacts</ol><h2 id=public-contract>Public Contract</h2><p>Primary operations:<ol><li><code>addPath(path)</code><li><code>getStats()</code><li><code>search(query)</code><li><code>clear()</code></ol><h2 id=data-model>Data Model</h2><p>Entry fields:<ol><li>id<li>type (<code>code|document|image|design|data</code>)<li>absolute and relative paths<li>metadata including size, extension, modified time, language, lines</ol><h2 id=performance-targets>Performance Targets</h2><ol><li>index medium repository (&lt;5k files) in acceptable local time<li>keep memory footprint bounded by configurable limits</ol><h2 id=acceptance-criteria>Acceptance Criteria</h2><ol><li>deterministic indexing for same input set<li>search returns stable results for repeated query<li>ignore rules consistently applied</ol></article></main><script src=https://sir-ad.github.io/Phantom/oat.min.js></script>